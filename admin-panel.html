<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Panel - OFFICIAL SIA</title>

<style>
body{
  font-family: Arial, Helvetica, sans-serif;
  background:#f4f4f4;
  margin:0;
}

/* HEADER */
.header{
  background:#000;
  color:#fff;
  padding:18px;
  text-align:center;
  font-size:24px;
  font-weight:bold;
}

/* DASHBOARD */
.dashboard{
  padding:15px;
  text-align:center;
  background:#eee;
}

.dashboard button{
  padding:12px 22px;
  margin:6px;
  border:none;
  cursor:pointer;
  border-radius:6px;
  font-size:15px;
}

.btn-book{ background:#8e24aa; color:#fff; }
.btn-reg{ background:#f5c400; }
.btn-trf{ background:#1976d2; color:#fff; }

/* SECTIONS */
.section{ display:none; padding:25px; }

/* ================= BOOK TEST ================= */
.book-box{
  background:#fff;
  max-width:500px;
  margin:auto;
  padding:25px;
  border-radius:8px;
}

.book-box input,
.book-box select{
  width:100%;
  padding:10px;
  margin-bottom:10px;
}

.book-btn{
  width:100%;
  padding:12px;
  background:#000;
  color:#fff;
  border:none;
  cursor:pointer;
}

/* ================= TRF FORM ================= */
.trf-wrapper{
  background:#fff;
  padding:25px;
  border-radius:8px;
}

.trf-top{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.trf-main{
  display:flex;
  gap:25px;
}

.trf-left{ width:70%; }
.trf-right{ width:30%; }

.row{
  display:flex;
  gap:10px;
  margin-bottom:8px;
}

input, textarea{
  width:100%;
  padding:6px;
}

.photo-box{
  width:100%;
  height:260px;
  border:2px solid #000;
  position:relative;
  overflow:hidden;
}

.photo-box video,
.photo-box canvas{
  width:100%;
  height:100%;
  object-fit:cover;
  position:absolute;
  top:0;
  left:0;
}

.photo-actions{
  display:flex;
  gap:8px;
  margin-top:8px;
}

.photo-actions button{
  width:100%;
  padding:6px;
  cursor:pointer;
}

/* ================= UPDATE RESULT ================= */
.result-box{
  background:#fff;
  max-width:600px;
  margin:auto;
  padding:25px;
  border-radius:8px;
}

.result-box input,
.result-box select{
  width:100%;
  padding:10px;
  margin-bottom:10px;
}

.update-btn{
  background:#2e7d32;
  color:#fff;
  padding:12px;
  width:100%;
  border:none;
  cursor:pointer;
}

/* MOBILE */
@media(max-width:768px){
  .trf-main{ flex-direction:column; }
  .trf-left,.trf-right{ width:100%; }
}
</style>
</head>

<body>

<div class="header">WELCOME TO THE ADMIN PANEL</div>

<div class="dashboard">
  <button class="btn-book" onclick="showBook()">BOOK TEST</button>
  <button class="btn-reg" onclick="showReg()">Candidate Registration Form</button>
  <button class="btn-trf" onclick="showResult()">Update Result</button>
</div>

<!-- ================= BOOK TEST ================= -->
<div class="section" id="bookSection">
  <div class="book-box">
    <h3>BOOK TEST</h3>

<input type="text" id="candidateName" placeholder="Candidate Name" required>

<input type="email" id="candidateEmail" placeholder="Candidate Email" required>

    <select>
      <option>Select Test Type</option>
      <option>IELTS Academic</option>
      <option>IELTS General</option>
      <option>IELTS Life Skills</option>
    </select>

    <input type="date">

    <select>
      <option>Select Time</option>
      <option>10:00 AM</option>
      <option>11:00 AM</option>
      <option>12:00 PM</option>
      <option>01:00 PM</option>
      <option>02:00 PM</option>
      <option>03:00 PM</option>
      <option>04:00 PM</option>
    </select>

    <button class="book-btn">BOOK TEST</button>
  </div>
</div>

<!-- IELTS TEST REPORT FORM -->
<section class="ielts-form-wrapper">

  <div class="ielts-form">

    <!-- TOP SECTION -->
    <div class="top-row">
      <div class="left-box"></div>

      <div class="right-text">
        <div class="ielts-title">
          IELTS<sup>TM</sup>
        </div>
        <div class="report-title">Test Report Form</div>
      </div>
    </div>

    <p class="note-text">
      <strong>NOTE.</strong><br>
      Admission to undergraduate and post graduate courses should be based on the
      <strong>ACADEMIC</strong> Reading and Writing Modules.<br>
      <strong>GENERAL TRAINING</strong> Reading and Writing Modules are not designed to test the full range
      of language skills required for academic purposes.<br>
      It is recommended that the candidate's language ability as indicated in this Test Report Form
      be re-assessed after two years from the date of the test.
    </p>

    <div class="info-row">
      <div>Centre Number: <input value="PK361" readonly></div>
      <div>Date: <input></div>
      <div>Candidate Number: <input></div>
    </div>

    <hr>

    <!-- CANDIDATE DETAILS -->
    <h3>Candidate Details</h3>

    <div class="candidate-row">
      <div>
        Family Name:<input class="gray">
        First Name:<input class="gray">
        Candidate ID:<input class="gray">
      </div>

      <div class="photo-box" id="photoBox">
        Click to Capture Photo
        <input type="file" accept="image/*" capture="user" hidden id="cameraInput">
      </div>
    </div>

    <hr>

    <!-- PERSONAL INFO -->
    <div class="info-grid">
      <div>Date of Birth:<input></div>
      <div>Sex (M/F):<input class="small"></div>
      <div>Scheme Code:<input></div>
    </div>

    <div>Country or Region of Origin:<input class="long"></div>
    <div>Country of Nationality:<input class="long"></div>
    <div>First Language:<input class="long"></div>

    <hr>

    <!-- TEST RESULTS -->
    <h3>Test Results</h3>

    <div class="results-row">
      Listening:<input class="gray">
      Reading:<input class="gray">
      Writing:<input class="gray">
      Speaking:<input class="gray">
      Overall Band Score:<input class="gray">
      CEFR Level:<input class="gray">
    </div>

    <hr>

    <!-- ADMIN COMMENTS -->
    <h3>Administrator Comments</h3>

    <textarea class="comments-box"></textarea>

    <div class="stamp-row">
      <div class="square-box">
        Recognising organisations must verify this score at ielts.org/verify
      </div>

      <div class="square-box editable">
        Validation Stamp
      </div>
    </div>

    <div class="final-row">
      Date:<input>
      Test Report Form Number:<input class="gray" id="trfNumber" readonly>
    </div>

    <div class="logos">
      <span>BRITISH COUNCIL</span>
      <span>IDP IELTS</span>
      <span>CAMBRIDGE English</span>
    </div>

    <p class="footer-note">
      IELTS is jointly owned by the British Council; IDP IELTS; and Cambridge University Press & Assessment
    </p>

  </div>

  <button class="pdf-btn" onclick="generatePDF()">Generate PDF FORM</button>

</section>

<!-- ================= UPDATE RESULT ================= -->
<div class="section" id="resultSection">
  <div class="result-box">
    <h3>Candidate Result Update</h3>

    <input placeholder="Listening">
    <input placeholder="Reading">
    <input placeholder="Writing">
    <input placeholder="Speaking">
    <input placeholder="Overall Band Score">

    <select>
      <option>Select CEFR</option>
      <option>A1</option><option>A2</option>
      <option>B1</option><option>B2</option>
      <option>C1</option><option>C2</option>
    </select>

    <label>Upload TRF PDF</label>
    <input type="file" accept="application/pdf">

    <button class="update-btn" onclick="updateResult()">Update Result</button>
  </div>
</div>

<script>
function hideAll(){
  document.querySelectorAll(".section").forEach(s=>s.style.display="none");
}
function showBook(){ hideAll(); bookSection.style.display="block"; }
function showReg(){ hideAll(); regSection.style.display="block"; }
function showResult(){ hideAll(); resultSection.style.display="block"; }
showReg();

/* CAMERA */
let stream;
function startCamera(){
  const v=document.getElementById("video");
  const c=document.getElementById("canvas");
  c.style.display="none"; v.style.display="block";

  navigator.mediaDevices.getUserMedia({video:true})
  .then(s=>{ stream=s; v.srcObject=s; })
  .catch(()=>alert("Camera permission denied"));
}
function capturePhoto(){
  const v=document.getElementById("video");
  const c=document.getElementById("canvas");
  c.width=v.videoWidth;
  c.height=v.videoHeight;
  c.getContext("2d").drawImage(v,0,0,c.width,c.height);
  v.style.display="none"; c.style.display="block";
  if(stream) stream.getTracks().forEach(t=>t.stop());
}

function updateResult() {
  const resultData = {
    listening: document.getElementById("listening").value,
    reading: document.getElementById("reading").value,
    writing: document.getElementById("writing").value,
    speaking: document.getElementById("speaking").value,
    pdf: document.getElementById("pdfLink").value
  };

  localStorage.setItem("studentResult", JSON.stringify(resultData));
  alert("Result Updated Successfully!");
}

function bookTest(){
  const name = document.getElementById("bookCandidateName").value.trim();
  const email = document.getElementById("bookCandidateEmail").value.trim();

  if(name === "" || email === ""){
    alert("❌ Please enter Candidate Name & Email");
    return;
  }

  alert("✅ Test booked successfully!\n\nEmail will be sent after backend setup.");
}

// PHOTO CAPTURE
const photoBox = document.getElementById("photoBox");
const cameraInput = document.getElementById("cameraInput");

photoBox.addEventListener("click", () => cameraInput.click());

cameraInput.addEventListener("change", () => {
  const file = cameraInput.files[0];
  if(file){
    const img = document.createElement("img");
    img.src = URL.createObjectURL(file);
    img.style.width = "100%";
    img.style.height = "100%";
    photoBox.innerHTML = "";
    photoBox.appendChild(img);
  }
});

// AUTO TRF NUMBER
document.getElementById("trfNumber").value =
  "TRF-" + Date.now();

// PDF GENERATE
function generatePDF(){
  window.print();
}
</script>
</body>
</html>